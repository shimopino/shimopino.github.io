# 非同期プログラミング

並行モデルの概念

- OSスレッド
  - 並行性を表現することは簡単だが、スレッド間の同期は難しく、パフォーマンスのオーバーヘッドも大きい
  - 大量のIOバウンドな作業をサポートするのは向いていない
- イベント駆動プログラミング
  - コールバック形式を組み合わせることで実現できる
  - 冗長で非線形的な制御フローになりがちである
- コルーチン
  - プログラミングモデルを変更する必要はなく、多数のタスクをサポートする
  - 低レベルの詳細は抽象化されているため、カスタマイズは難しい
- アクターモデル
  - 並行計算を全てアクターと呼ばれる単位に分割し、分散システムと同じようにフォールディング・メッセージ・パッシングによって通信を行う
  - フロー制御やリトライロジックは未解決のままである

Rust

- Futureはポーリングされた時に処理を進め、Dropされるとそれ以降の進行が止まる
- ゼロコストであり、ヒープ割り当てや動的ディスパッチなしで非同期を使用できる
- 組み込みランタイムはなく、シングルスレッドとマルチスレッドの両方のランタイムがある

Rustでは非同期処理の代わりにOSのスレッドを利用することができるが、両者を入れ替えるには大きなリファクタリングが必要となる。

